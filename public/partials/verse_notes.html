<div ng-controller="NotesController as notes">
  <h3 style="text-transform: capitalize">{{verses.selected_verse.reference}}</h3>
  <p ng-bind-html="verses.selected_verse.text"></p>
  <br>
  <button type="button" ng-click="new_note=true">new note</button>
  <div ng-show="new_note">
    <form ng-submit="notes.new_note(verses.selected_verse.id)">
      <input type="text" placeholder="Note on verse" ng-model="notes.note_text">
      <button type="submit" ng-click="new_note=false">save</button>
    </form>
  </div>
  <div ng-repeat="note in verses.selected_notes">
    {{note.text}}
    <div>
      <button type="button" ng-click="editing_note=true">edit</button>
      <button type="button" ng-click="notes.delete_note(note)">delete</button>
    </div>
    <div ng-show="editing_note">
      <form ng-submit="notes.edit_note(note)">
        <input type="text" placeholder="{{note.text}}" ng-model="notes.note_text">
        <button type="submit" ng-click="editing_note=false">save</button>
      </form>
    </div>
    <br>
  </div>

</div>
